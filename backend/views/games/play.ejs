<!DOCTYPE html>
<html>
<head>
  <title>Play</title>

  <link rel="stylesheet" type="text/css" href="/css/chessboard-0.3.0.css">
</head>
<body>
  <h1>Play game <%= game.hid %></h1>
  
  <!-- <p><a href="#" onclick="move()">Move</a></p> -->

  <h2>Game</h2> 

  <div id="board"></div>

  <!-- socketio -->
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/chess.js"></script>
  <script type="text/javascript" src="/js/chessboard-0.3.0.js"></script>
  <script type="text/javascript" src="/js/main.js"></script>
  <script>
    function move() {
      socket.emit('game.move')      
    }

    window.player = null
    window.socket = io.connect('/<%= game.hid %>')

    socket.on('game.player', function (data) {
      console.log('player:' + data.player.role)
      window.player = data.player
    })

    socket.on('game.canstart', function (data) {
      console.log('ok to play', data.fen)
      window.game.load(data.fen)
      window.board.position(data.fen)
    })

    socket.on('board.update', function (data) {
      console.log(data)
      window.game.load(data.fen)
      window.board.position(data.fen)
    })

    // socket.on('move')
  </script>
</body>
</html>
